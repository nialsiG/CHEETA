[gd_scene load_steps=14 format=3 uid="uid://dpjoefpe0kold"]

[ext_resource type="Script" path="res://Scenes/lower.gd" id="1_5bihv"]
[ext_resource type="PackedScene" uid="uid://cg12ff4kayco5" path="res://Scenes/tooth.tscn" id="1_md78a"]
[ext_resource type="PackedScene" uid="uid://6fv002hffeil" path="res://Scenes/player.tscn" id="2_llk3r"]
[ext_resource type="Script" path="res://Scenes/food_manager.gd" id="4_yrnkh"]
[ext_resource type="Script" path="res://Scenes/teeth_manager.gd" id="5_keoob"]
[ext_resource type="Script" path="res://Scenes/ui_manager.gd" id="6_0sulf"]
[ext_resource type="Theme" uid="uid://bl8dmw0snf36c" path="res://Assets/Resources/label_theme_blue.tres" id="7_meqv1"]

[sub_resource type="Gradient" id="Gradient_ow6wo"]
colors = PackedColorArray(0.1764, 0.4788, 0.63, 1, 1, 0.54, 0.816, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_kxid1"]
gradient = SubResource("Gradient_ow6wo")
fill_to = Vector2(0, 1)

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_ygdvt"]
panorama = SubResource("GradientTexture2D_kxid1")

[sub_resource type="Sky" id="Sky_cb6wi"]
sky_material = SubResource("PanoramaSkyMaterial_ygdvt")

[sub_resource type="Environment" id="Environment_bj6el"]
background_mode = 2
sky = SubResource("Sky_cb6wi")
tonemap_mode = 2

[sub_resource type="Curve3D" id="Curve3D_bisr0"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -0.2, 1.005, 0, 0, 0, 0, 0, 0, 0, 1, -0.931, 0, 0, 0, 0, 0, 0, 0, 0.8, -2.994, 0, 0, 0, 0, 0, 0, 0, 0.8, -4.994, 0, 0, 0, 0, 0, 0, 0, -0.6, -6.917, 0, 0, 0, 0, 0, 0, 0, -2, -4.997, 0, 0, 0, 0, 0, 0, 0, -2, -2.997, 0, 0, 0, 0, 0, 0, 0, -2, -0.997, 0, 0, 0, 0, 0, 0, 0, -1, 1.004, 0, 0, 0, 0, 0, 0, 0, -0.2, 1.005, 0),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 10

[node name="world" type="Node3D"]
transform = Transform3D(1, -0.000393621, 0.000378934, 0.000393996, 0.999999, -0.0010338, -0.000378543, 0.00103395, 0.999999, 0, 0, 0)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866023, -0.433016, 0.250001, 0, 0.499998, 0.866027, -0.500003, 0.749999, -0.43301, 4.69181, 16.2529, -8.12638)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_bj6el")

[node name="player" parent="." instance=ExtResource("2_llk3r")]
transform = Transform3D(1, -4.78906e-11, 2.91038e-11, -6.22435e-12, 1, 0, 0, 2.32831e-10, 1, 5.82077e-11, 1, 7)

[node name="teeth" type="Node3D" parent="."]
transform = Transform3D(1, -4.78337e-11, 2.91038e-11, -6.19593e-12, 1, 0, -2.91038e-11, 1.16415e-10, 1, -2.73174, -1.16415e-10, 1.10961)

[node name="upper" type="Node3D" parent="teeth"]
transform = Transform3D(1, 1.19655e-11, 0, -3.67208e-11, 1, -1.16415e-10, 0, 1.16415e-10, 1, 0, 0, 0)

[node name="tooth_upper" parent="teeth/upper" instance=ExtResource("1_md78a")]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.575954, 0, 0)

[node name="lower" type="Node3D" parent="teeth"]
transform = Transform3D(1, 1.19655e-11, 0, -3.67208e-11, 1, -1.16415e-10, 0, 1.16415e-10, 1, 3, 3.10635, 1.28796e-10)
script = ExtResource("1_5bihv")

[node name="Path3D" type="Path3D" parent="teeth/lower"]
transform = Transform3D(1, -1.88152e-11, 0, -6.30962e-12, 1, 0, 0, 1.16415e-10, 1, -0.00043112, -0.044785, -0.00109065)
curve = SubResource("Curve3D_bisr0")

[node name="PathFollow3D" type="PathFollow3D" parent="teeth/lower/Path3D"]
transform = Transform3D(0.999984, 0, 0, 0, 0.999984, 0, 0, 0, 0.999988, -0.864938, -6.55366, 0)
progress = 9.17647
rotation_mode = 0
use_model_front = true

[node name="tooth_lower" parent="teeth/lower/Path3D/PathFollow3D" instance=ExtResource("1_md78a")]
unique_name_in_owner = true
initial_orientation = Vector3(3.14, 0, 0)

[node name="food_manager" type="Node" parent="."]
script = ExtResource("4_yrnkh")

[node name="teeth_manager" type="Node" parent="."]
script = ExtResource("5_keoob")

[node name="ui_manager" type="Node" parent="."]
script = ExtResource("6_0sulf")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="ColorRect" type="ColorRect" parent="CanvasLayer"]
anchors_preset = -1
anchor_right = 0.161
anchor_bottom = 1.0
offset_right = -0.472015
grow_horizontal = 2
grow_vertical = 2

[node name="MarginContainer" type="MarginContainer" parent="CanvasLayer/ColorRect"]
layout_mode = 1
anchors_preset = -1
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 1.0
offset_bottom = -436.0
theme_override_constants/margin_left = 20
theme_override_constants/margin_top = 20
theme_override_constants/margin_right = 20
theme_override_constants/margin_bottom = 20

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/ColorRect/MarginContainer"]
layout_mode = 2

[node name="Label_teeth" type="Label" parent="CanvasLayer/ColorRect/MarginContainer/VBoxContainer"]
layout_mode = 2
theme = ExtResource("7_meqv1")
text = "Teeth:"

[node name="start_button" type="Button" parent="CanvasLayer/ColorRect/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Start"

[node name="stop_button" type="Button" parent="CanvasLayer/ColorRect/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Stop"

[node name="reset_button" type="Button" parent="CanvasLayer/ColorRect/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Reset"

[node name="HSeparator" type="HSeparator" parent="CanvasLayer/ColorRect/MarginContainer/VBoxContainer"]
layout_mode = 2

[node name="Label_food" type="Label" parent="CanvasLayer/ColorRect/MarginContainer/VBoxContainer"]
layout_mode = 2
theme = ExtResource("7_meqv1")
text = "Food particles:"

[node name="food_particle_count" type="Label" parent="CanvasLayer/ColorRect/MarginContainer/VBoxContainer"]
layout_mode = 2
theme = ExtResource("7_meqv1")
text = "Food particles:"

[node name="spawn_food_button" type="Button" parent="CanvasLayer/ColorRect/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "New  food particle"

[node name="reset_food_button" type="Button" parent="CanvasLayer/ColorRect/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Reset food"

[connection signal="pressed" from="CanvasLayer/ColorRect/MarginContainer/VBoxContainer/start_button" to="ui_manager" method="_on_start_button_pressed"]
[connection signal="pressed" from="CanvasLayer/ColorRect/MarginContainer/VBoxContainer/stop_button" to="ui_manager" method="_on_stop_button_pressed"]
[connection signal="pressed" from="CanvasLayer/ColorRect/MarginContainer/VBoxContainer/reset_button" to="ui_manager" method="_on_reset_button_pressed"]
[connection signal="pressed" from="CanvasLayer/ColorRect/MarginContainer/VBoxContainer/spawn_food_button" to="ui_manager" method="_on_spawn_food_button_pressed"]
[connection signal="pressed" from="CanvasLayer/ColorRect/MarginContainer/VBoxContainer/reset_food_button" to="ui_manager" method="_on_reset_food_button_pressed"]
